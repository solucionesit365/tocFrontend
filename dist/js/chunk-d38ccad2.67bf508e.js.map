{"version":3,"sources":["webpack:///./src/components/Tickets.vue","webpack:///./src/components/Tickets.vue?4fef","webpack:///./src/components/Tickets.vue?d807"],"names":["class","scope","style","listaTickets","slice","reverse","item","index","key","setTicketActivo","_id","activo","moment","unix","timestamp","format","tipoPago","total","toFixed","ticketInfo","ticket","imprimirTicket","type","esborraTicket","toast","name","setup","mounted","value","length","goTo","url","router","push","a","post","idTicket","console","log","ticketID","then","data","error","mensaje","success","arrayTickets","i","components","DetalleTicket","__exports__","render"],"mappings":"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","file":"js/chunk-d38ccad2.67bf508e.js","sourcesContent":["<template>\r\n    <div class=\"col\">\r\n      <br />\r\n      <div class=\"row\">\r\n        <div class=\"table-responsive\">\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Número ticket</th>\r\n              <th scope=\"col\">Hora</th>\r\n              <th scope=\"col\">Forma de pago</th>\r\n              <th scope=\"col\">Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(item, index) of listaTickets.slice().reverse()\" v-bind:key={index}\r\n            @click=\"setTicketActivo(item)\"\r\n            v-bind:class=\"{estiloActivoTicketCaja: item._id === activo}\"\r\n            >\r\n                <td style=\"text-align: center\">{{item._id}}</td>\r\n                <td>\r\n                  {{moment.unix(item.timestamp / 1000).format('DD/MM/YYYY hh:mm:ss')}}\r\n                  </td>\r\n                <td>{{item.tipoPago}}</td>\r\n                <td>{{item.total.toFixed(2)}} €</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"ticketInfo != null\" class=\"col\">\r\n      <DetalleTicket :ticket=\"ticketInfo\" />\r\n      <div class='row'>\r\n        <div class=\"col\">\r\n            <button\r\n            @click=\"imprimirTicket()\"\r\n            type=\"button\" class=\"btn btn-secondary\r\n            botonesPrincipales w-100 btn-block botonesWidth\">\r\n                <i class=\"bi bi-printer-fill iconosBootstrap\"></i>\r\n            </button>\r\n        </div>\r\n        \r\n      </div>\r\n      <br>\r\n        <div class=\"col\">\r\n            <button\r\n            @click=\"esborraTicket()\"\r\n            type=\"button\" class=\"btn btn-secondary\r\n            botonesPrincipales w-100 btn-block botonesWidth\">\r\n                <i class=\"bi bi-trash iconosBootstrap\"></i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport DetalleTicket from '@/components/DetalleTicket.vue';\r\nimport SalidaDinero from '@/components/SalidaDinero.vue';\r\nimport EntradaDinero from '@/components/EntradaDinero.vue';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport { useStore } from 'vuex';\r\nimport router from '../router/index';\r\nimport { useToast } from 'vue-toastification';\r\nconst toast = useToast();\r\nexport default {\r\n  \r\n  name: 'Caja',\r\n  setup() {\r\n    const activo = ref(null);\r\n    const total = ref(0);\r\n    const listaTickets = ref([]);\r\n    const ticketInfo = ref(null);\r\n    const store = useStore();\r\n\r\n    function setTicketActivo(ticket, mounted = false) {\r\n    \r\n      if(mounted) ticket = listaTickets.value[listaTickets.value.length-1];\r\n      ticketInfo.value = ticket;\r\n      if (listaTickets.value.length > 0) activo.value = ticket._id;\r\n    }\r\n\r\n    function goTo(url) {\r\n      router.push(url);\r\n    }\r\n\r\n    function imprimirTicket() {\r\n      if (activo.value != null) {\r\n        axios.post('impresora/imprimirTicket', { idTicket: activo.value });\r\n        goTo('/');\r\n      } else {\r\n        console.log('Primero selecciona un ticket');\r\n      }\r\n    }\r\n\r\n      function esborraTicket() {\r\n      if (activo.value != null) {\r\n            axios.post('tickets/rectificativa', { ticketID: activo.value }).then((ticket) =>{\r\n                            \r\n                    if(!ticket.data.error){\r\n                      toast.success(ticket.data.mensaje)\r\n                      goTo('/');\r\n                    } else{\r\n                    toast.error(ticket.data.mensaje)\r\n                    } \r\n            \r\n          })\r\n //goTo('/');\r\n      } else {\r\n        console.log('Primero selecciona un ticket');\r\n      }\r\n    }\r\n\r\n    \r\n\r\n    onMounted(() => {\r\n      axios.post('tickets/getTicketsIntervalo').then((arrayTickets) => {\r\n        total.value = 0;\r\n        for (let i = 0; i < arrayTickets.data.length; i += 1) {\r\n          total.value += arrayTickets.data[i].total;\r\n        }\r\n        listaTickets.value = arrayTickets.data;\r\n        setTicketActivo('', true);\r\n      });\r\n    });\r\n    return {\r\n      goTo,\r\n      listaTickets,\r\n      setTicketActivo,\r\n      activo,\r\n      total,\r\n      moment,\r\n      ticketInfo,\r\n      imprimirTicket,\r\n      esborraTicket,\r\n    };\r\n    /* FINAL SETUP */\r\n  },\r\n  components: {\r\n      DetalleTicket,\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n  .table-responsive {\r\n    height: 80vh;\r\n  }\r\n  .estiloActivoTicketCaja {\r\n    background-color:rgb(255, 221, 176) !important;\r\n  }\r\n  .iconosBootstrap {\r\n    font-size: 30px;\r\n  }\r\n  .botonesWidth {\r\n    width: 5vw;\r\n    border: solid black 1px;\r\n  }\r\n\r\n  .botonesPrincipales{\r\n    background-color: #fff5e9;\r\n    color: #c95907;\r\n    border-color: #bf5c18;\r\n    border-width: 3px;\r\n}\r\n</style>\r\n","import { render } from \"./Tickets.vue?vue&type=template&id=24e52339&scoped=true\"\nimport script from \"./Tickets.vue?vue&type=script&lang=js\"\nexport * from \"./Tickets.vue?vue&type=script&lang=js\"\n\nimport \"./Tickets.vue?vue&type=style&index=0&id=24e52339&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\fvarg\\\\Documents\\\\GitHub\\\\tocFrontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-24e52339\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Tickets.vue?vue&type=style&index=0&id=24e52339&scoped=true&lang=css\""],"sourceRoot":""}