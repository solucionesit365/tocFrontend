(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17f002b1"],{8287:function(a,t,o){"use strict";o.r(t);var e=o("7a23");function n(a,t,o,n,c,r){var d=Object(e["F"])("MenuResponsableTienda",!0);return Object(e["x"])(),Object(e["e"])(d)}var c=function(a){return Object(e["A"])("data-v-73f04d94"),a=a(),Object(e["y"])(),a},r={class:"row mt-2 ms-2"},d={class:"col"},i=Object(e["i"])('<div class="card-body" data-v-73f04d94><span class="card-title sizeBotonesTitulo" data-v-73f04d94>1. Nuevo plan trabajador/a</span><p class="card-text" data-v-73f04d94><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-person-plus" viewBox="0 0 16 16" data-v-73f04d94><path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z" data-v-73f04d94></path><path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" data-v-73f04d94></path></svg></p></div>',1),s=[i],l=Object(e["i"])('<div class="card-body" data-v-73f04d94><span class="card-title sizeBotonesTitulo" data-v-73f04d94>2. Validar horas</span><p class="card-text" data-v-73f04d94><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-clock mt-1" viewBox="0 0 16 16" data-v-73f04d94><path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z" data-v-73f04d94></path><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z" data-v-73f04d94></path></svg></p></div>',1),b=[l],u={class:"modal fade",id:"crearPlanModal",tabindex:"-1"},p={class:"modal-dialog",style:{"max-width":"700px"}},h={class:"modal-content"},v=c((function(){return Object(e["h"])("div",{class:"modal-header"},[Object(e["h"])("h5",{class:"modal-title"},"Nuevo plan de trabajador"),Object(e["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)})),f={class:"modal-body"},j={class:"row"},O={class:"col"},m=c((function(){return Object(e["h"])("label",{for:"customRange3",class:"form-label",style:{"font-size":"1.5rem"}},"Hora entrada",-1)})),C={class:"row"},y={class:"col"},g=Object(e["i"])("<option selected data-v-73f04d94>04</option><option data-v-73f04d94>05</option><option data-v-73f04d94>06</option><option data-v-73f04d94>07</option><option data-v-73f04d94>08</option><option data-v-73f04d94>09</option><option data-v-73f04d94>10</option><option data-v-73f04d94>11</option><option data-v-73f04d94>12</option><option data-v-73f04d94>13</option><option data-v-73f04d94>14</option><option data-v-73f04d94>15</option><option data-v-73f04d94>16</option><option data-v-73f04d94>17</option><option data-v-73f04d94>18</option><option data-v-73f04d94>19</option>",16),w=[g],x={class:"col"},E=c((function(){return Object(e["h"])("option",{selected:""},"00",-1)})),k=c((function(){return Object(e["h"])("option",null,"30",-1)})),R=[E,k],T={class:"row"},M={class:"col"},V=c((function(){return Object(e["h"])("label",{for:"customRange3",class:"form-label",style:{"font-size":"1.5rem"}},"Hora salida",-1)})),H={class:"row"},I={class:"col"},z=Object(e["i"])("<option selected data-v-73f04d94>04</option><option data-v-73f04d94>05</option><option data-v-73f04d94>06</option><option data-v-73f04d94>07</option><option data-v-73f04d94>08</option><option data-v-73f04d94>09</option><option data-v-73f04d94>10</option><option data-v-73f04d94>11</option><option data-v-73f04d94>12</option><option data-v-73f04d94>13</option><option data-v-73f04d94>14</option><option data-v-73f04d94>15</option><option data-v-73f04d94>16</option><option data-v-73f04d94>17</option><option data-v-73f04d94>18</option><option data-v-73f04d94>19</option><option data-v-73f04d94>20</option><option data-v-73f04d94>21</option><option data-v-73f04d94>22</option><option data-v-73f04d94>23</option><option data-v-73f04d94>00</option>",21),A=[z],N={class:"col"},P=c((function(){return Object(e["h"])("option",{selected:""},"00",-1)})),S=c((function(){return Object(e["h"])("option",null,"30",-1)})),U=[P,S],B={class:"modal-footer"},D=c((function(){return Object(e["h"])("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Cerrar",-1)})),q={type:"submit",class:"btn btn-success"},X={class:"modal fade",id:"validarHorasModal",tabindex:"-1"},_={class:"modal-dialog",style:{"max-width":"1200px"}},J={class:"modal-content"},F=c((function(){return Object(e["h"])("div",{class:"modal-header"},[Object(e["h"])("h5",{class:"modal-title"},"Validar horas del trabajador"),Object(e["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)})),K={class:"modal-body"},L={key:0,class:"table table-striped"},G=c((function(){return Object(e["h"])("thead",null,[Object(e["h"])("tr",null,[Object(e["h"])("th",{scope:"col"},"Trabajador/a"),Object(e["h"])("th",{scope:"col"},"Horas asignadas"),Object(e["h"])("th",{scope:"col"},"Horas extras"),Object(e["h"])("th",{scope:"col"},"Horas coordinaciÃ³n"),Object(e["h"])("th",{scope:"col"},"Horas totales")])],-1)})),Q={scope:"row"},W=c((function(){return Object(e["h"])("td",null,"0",-1)})),Y={class:"def-number-input number-input safari_only"},Z=["onClick"],$=["onUpdate:modelValue"],aa=["onClick"],ta={class:"def-number-input number-input safari_only"},oa=["onClick"],ea=["onUpdate:modelValue"],na=["onClick"],ca={key:1,class:"col text-center"},ra=c((function(){return Object(e["h"])("h1",null,"No hay trabajadores fichados de ayer.",-1)})),da=[ra],ia=c((function(){return Object(e["h"])("div",{class:"modal-footer"},[Object(e["h"])("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Cerrar")],-1)})),sa={class:"position-fixed bottom-0 start-0 ms-2 mb-2"};function la(a,t,o,n,c,i){return Object(e["x"])(),Object(e["g"])(e["a"],null,[Object(e["h"])("div",r,[Object(e["h"])("div",d,[Object(e["h"])("div",{onClick:t[0]||(t[0]=function(a){return n.abrirModalPlanes()}),class:"card text-white bg-primary mb-3",style:{"max-width":"18rem"}},s),Object(e["h"])("div",{onClick:t[1]||(t[1]=function(a){return n.abrirModalValidarHoras()}),class:"card text-white bg-success mb-3",style:{"max-width":"18rem"}},b)])]),Object(e["h"])("div",u,[Object(e["h"])("div",p,[Object(e["h"])("div",h,[Object(e["h"])("form",{onSubmit:t[6]||(t[6]=Object(e["S"])((function(a){return n.crearPlan()}),["prevent"]))},[v,Object(e["h"])("div",f,[Object(e["h"])("div",j,[Object(e["h"])("div",O,[m,Object(e["h"])("div",C,[Object(e["h"])("div",y,[Object(e["R"])(Object(e["h"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(a){return n.horaEntrada=a}),class:"form-select"},w,512),[[e["M"],n.horaEntrada]])]),Object(e["h"])("div",x,[Object(e["R"])(Object(e["h"])("select",{"onUpdate:modelValue":t[3]||(t[3]=function(a){return n.minutosEntrada=a}),class:"form-select"},R,512),[[e["M"],n.minutosEntrada]])])])])]),Object(e["h"])("div",T,[Object(e["h"])("div",M,[V,Object(e["h"])("div",H,[Object(e["h"])("div",I,[Object(e["R"])(Object(e["h"])("select",{"onUpdate:modelValue":t[4]||(t[4]=function(a){return n.horaSalida=a}),class:"form-select"},A,512),[[e["M"],n.horaSalida]])]),Object(e["h"])("div",N,[Object(e["R"])(Object(e["h"])("select",{"onUpdate:modelValue":t[5]||(t[5]=function(a){return n.minutosSalida=a}),class:"form-select"},U,512),[[e["M"],n.minutosSalida]])])])])])]),Object(e["h"])("div",B,[D,Object(e["h"])("button",q,"Crear plan "+Object(e["I"])(n.getResumenPlan),1)])],32)])])]),Object(e["h"])("div",X,[Object(e["h"])("div",_,[Object(e["h"])("div",J,[F,Object(e["h"])("div",K,[n.arrayTrabajadores.length>0?(Object(e["x"])(),Object(e["g"])("table",L,[G,Object(e["h"])("tbody",null,[(Object(e["x"])(!0),Object(e["g"])(e["a"],null,Object(e["D"])(n.arrayTrabajadores,(function(a,t){return Object(e["x"])(),Object(e["g"])("tr",{key:t},[Object(e["h"])("th",Q,Object(e["I"])(n.arrayTrabajadores[t].nombre),1),W,Object(e["h"])("td",null,[Object(e["h"])("div",Y,[Object(e["h"])("button",{class:"minus",onClick:function(a){return n.restar("EXTRA",t)}},null,8,Z),Object(e["R"])(Object(e["h"])("input",{class:"quantity",disabled:"",min:"-5",name:"quantity","onUpdate:modelValue":function(t){return a.horasExtra=t},type:"number"},null,8,$),[[e["N"],a.horasExtra]]),Object(e["h"])("button",{class:"plus",onClick:function(a){return n.sumar("EXTRA",t)}},null,8,aa)])]),Object(e["h"])("td",null,[Object(e["h"])("div",ta,[Object(e["h"])("button",{class:"minus",onClick:function(a){return n.restar("COORDINACION",t)}},null,8,oa),Object(e["R"])(Object(e["h"])("input",{class:"quantity",disabled:"",min:"-5",name:"quantity","onUpdate:modelValue":function(t){return a.horasCoordinacion=t},type:"number"},null,8,ea),[[e["N"],a.horasCoordinacion]]),Object(e["h"])("button",{class:"plus",onClick:function(a){return n.sumar("COORDINACION",t)}},null,8,na)])]),Object(e["h"])("td",null,Object(e["I"])(a.horasExtra+a.horasCoordinacion),1)])})),128))])])):(Object(e["x"])(),Object(e["g"])("div",ca,da))]),ia])])]),Object(e["h"])("div",sa,[Object(e["h"])("button",{class:"btn btn-warning buttonSizeTecnico",onClick:t[7]||(t[7]=function(a){return n.volver()})},"Volver")])],64)}o("99af");var ba=o("bc3a"),ua=o.n(ba),pa=o("7b17"),ha=o("a18c"),va=o("0180"),fa={name:"MenuResponsable",setup:function(){var a=Object(va["b"])(),t=null,o=null,n=Object(e["C"])("04"),c=Object(e["C"])("00"),r=Object(e["C"])("04"),d=Object(e["C"])("00"),i=Object(e["C"])([]),s=Object(e["C"])(0),l=Object(e["C"])(0),b=Object(e["c"])((function(){return l.value+s.value}));function u(a){ha["a"].push(a)}function p(){var t="".concat(n.value,":").concat(c.value),o="".concat(r.value,":").concat(d.value);ua.a.post("trabajadores/crearPlan",{horaEntrada:t,horaSalida:o}).then((function(t){0==t.data.error?a.success("Plan OK"):a.error(t.data.mensaje)}))["catch"]((function(t){console.log(t),a.error("Error, mirar consola")}))}function h(a){t.show()}function v(a){o.show()}function f(t,o,e,n,c){ua.a.post("trabajadores/guardarHorasExtraCoordinacion",{horasExtra:o,horasCoordinacion:e,timestamp:n,idTrabajador:c}).then((function(n){0==n.data.error?(i.value[t].horasExtra=o,i.value[t].horasCoordinacion=e):a.error(n.data.mensaje)}))["catch"]((function(t){console.log(t),a.error("Error en CATCH trabajadores/guardarHorasExtraCoordinacion")}))}function j(a,t){var o=i.value[t].horasCoordinacion,e=i.value[t].horasExtra;switch(a){case"COORDINACION":o+=.5;break;case"EXTRA":e+=.5;break}f(t,e,o,i.value[t].timestamp,i.value[t].idTrabajador)}function O(a,t){var o=i.value[t].horasCoordinacion,e=i.value[t].horasExtra;switch(a){case"COORDINACION":o-=.5;break;case"EXTRA":e-=.5;break}f(t,e,o,i.value[t].timestamp,i.value[t].idTrabajador)}function m(){ha["a"].push("/menu/fichajes")}var C=Object(e["c"])((function(){return"".concat(n.value,":").concat(c.value," - ").concat(r.value,":").concat(d.value)}));return Object(e["v"])((function(){t=new pa["a"](document.getElementById("crearPlanModal"),{keyboard:!1}),o=new pa["a"](document.getElementById("validarHorasModal"),{keyboard:!1}),ua.a.get("trabajadores/getTrabajaronAyer").then((function(a){console.log(a.data),i.value=a.data}))["catch"]((function(t){console.log(t),a.error("Error, no se ha podido obtener la lista de trabajadores de ayer")}))})),{guardarHorasExtraCoordinacion:f,horasTotales:b,horasExtra:l,horasCoordinacion:s,sumar:j,restar:O,arrayTrabajadores:i,abrirModalValidarHoras:v,volver:m,crearPlan:p,getResumenPlan:C,horaEntrada:n,horaSalida:r,minutosEntrada:c,minutosSalida:d,goTo:u,abrirModalPlanes:h}}},ja=(o("b027"),o("d959")),Oa=o.n(ja);const ma=Oa()(fa,[["render",la],["__scopeId","data-v-73f04d94"]]);var Ca=ma,ya={name:"MenuResponsable",components:{MenuResponsableTienda:Ca}};const ga=Oa()(ya,[["render",n]]);t["default"]=ga},9249:function(a,t,o){},b027:function(a,t,o){"use strict";o("9249")}}]);
//# sourceMappingURL=chunk-17f002b1.333a9b4f.js.map