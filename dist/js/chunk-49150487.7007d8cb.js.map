{"version":3,"sources":["webpack:///./src/components/Fichajes.vue","webpack:///./src/components/Fichajes.vue?5764","webpack:///./src/components/Fichajes.vue?70f2"],"names":["class","style","id","data-bs-backdrop","data-bs-keyboard","tabindex","type","data-bs-dismiss","aria-label","scope","href","abrirModal","consumoPersonal","abrirModalPassword","apagarEquipo","desfichar","inputBusqueda","placeholder","buscar","actualizarLista","arrayTrabajadores","trabajador","index","key","nombre","fichado","undefined","fichar","goTo","goToMenuResponsable","minlength","maxlength","password","sha1","name","setup","store","idPlanificacion","modalFichajes","modalPassword","toast","arrayPlanes","test","console","log","value","hash","router","push","error","show","cerrarModal","hide","a","post","busqueda","then","res","data","err","ficharReal","idTrabajador","idPlan","mensaje","dispatch","success","state","Trabajadores","trabajadorActivo","id_cesta","_id","data2","x","get","document","getElementById","keyboard","info","watch","this","length","__exports__","render"],"mappings":"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","file":"js/chunk-49150487.7007d8cb.js","sourcesContent":["<template>\r\n    <div class=\"row\">\r\n        <div class='col-md-6 ms-3 mt-3'>\r\n            <div class='row ms-3'>\r\n                <div class=\"card cardWidth\">\r\n                    <div class=\"card-body\" style='text-align: center;'>\r\n                        <span><i class=\"bi bi-fingerprint\"></i></span>\r\n                        <a href=\"#\" class=\"btn btn-primary\" @click=\"abrirModal()\">Fichaje</a>\r\n                    </div>\r\n                </div>\r\n\r\n<!-- <div class=\"card\" style=\"width: 18rem;\">\r\n  <img src=\"/fingerprint.svg\" class=\"card-img-top mt-1\" height=\"80\" alt=\"...\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">Fichajes</h5>\r\n    <p class=\"card-text\">RegistroEntrada y salida para los trabajadores</p>\r\n    <a href=\"#\" class=\"btn btn-primary\">Go somewhere</a>\r\n  </div>\r\n</div> -->\r\n\r\n                <div class=\"card cardWidth\">\r\n                    <div class=\"card-body\" style='text-align: center;'>\r\n                        <span><i class=\"bi bi-cup-straw\"></i></span>\r\n                        <button @click=\"consumoPersonal()\" class=\"btn btn-primary\">Consumo personal</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"card cardWidth\">\r\n                    <div class=\"card-body\" style='text-align: center;'>\r\n                        <span><i class=\"bi bi-file-earmark-lock\"></i></span>\r\n                        <button @click=\"abrirModalPassword()\" class=\"btn btn-primary\">Menú responsable</button>\r\n                    </div>\r\n                    \r\n               \r\n                </div>\r\n            <div class=\"card cardWidth\">\r\n                    <div class=\"card-body\" style='text-align: center;'>\r\n                        <span><i class=\"bi bi-power\"></i></span>\r\n                        <button @click=\"apagarEquipo()\" class=\"btn btn-danger\">Apagar</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class='row ms-3'>\r\n\r\n                <div class=\"card cardWidth\">\r\n                    <div class=\"card-body\" style='text-align: center;'>\r\n                        <span><i class=\"bi bi-door-open\"></i></span>\r\n                        <button @click=\"desfichar()\" class=\"btn btn-primary\">DesFichar</button>\r\n                    </div>\r\n                </div>\r\n              \r\n                \r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n    <!-- <div class=\"row mt-2\">\r\n        <div class=\"col text-center\">\r\n            <span class=\"tituloFichajes\">Fichajes del día 01/02/2022</span>\r\n            <table class=\"table table-striped mx-auto\" style=\"width: 50%\">\r\n            <thead>\r\n                <tr>\r\n                <th scope=\"col\">Nombre</th>\r\n                <th scope=\"col\">Entrada</th>\r\n                <th scope=\"col\">Salida</th>\r\n                <th scope=\"col\">Turno seleccionado</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <th>Miguel</th>\r\n                    <td>08:01</td>\r\n                    <td>16:00</td>\r\n                    <td>6:00 a 14:00h</td>\r\n                </tr>\r\n                <tr>\r\n                    <th>Miguel</th>\r\n                    <td>08:01</td>\r\n                    <td>16:00</td>\r\n                    <td>6:00 a 14:00h</td>\r\n                </tr>\r\n                <tr>\r\n                    <th>Miguel</th>\r\n                    <td>08:01</td>\r\n                    <td>16:00</td>\r\n                    <td>6:00 a 14:00h</td>\r\n                </tr>\r\n            </tbody>\r\n            </table>\r\n        </div>\r\n    </div> -->\r\n\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"modalFichajes\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\">\r\n        <div class=\"modal-dialog\" style=\"max-width: 700px\">\r\n            <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLabel\">Fichaje</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <div class=\"row\">\r\n                    <input v-model=\"inputBusqueda\" class=\"form-control\" style=\"width: 350px; height: 50px; font-size: 20px\" type=\"text\" placeholder=\"Introduce tu nombre\">\r\n                    <button type=\"button\" style=\"width: 100px\" class=\"btn btn-primary ms-2\" @click=\"buscar()\">Buscar</button>\r\n                    <button type=\"button\" style=\"width: 200px\" class=\"btn btn-warning ms-2\" @click=\"actualizarLista()\">Actualizar lista</button>\r\n                    <div class=\"row mt-2\">\r\n                        <!-- Selcion de los turnos solo para silema  -->\r\n                        <!-- <select v-model=\"idPlanificacion\" class=\"form-select\" style=\"height: 50px; font-size: 20px\">\r\n                            <option value=\"SIN_TURNO\">Sin turno</option>\r\n                            <option v-for=\"(item, index) in arrayPlanes\" :key=\"index\" :value=\"arrayPlanes[index].idPlan\">{{arrayPlanes[index].turno}}</option>\r\n                        </select> -->\r\n                    </div>\r\n                    <div class=\"row mt-2\">\r\n                        <div class=\"table\" style=\"height: 400px;\">\r\n                            <table class=\"table table-striped\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Nombre</th>\r\n                                        <th scope=\"col\">Fichar/Desfichar</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"(trabajador, index) of arrayTrabajadores\" v-bind:key=\"index\">\r\n                                        <td>{{trabajador.nombre}}</td>\r\n                                        <td v-if=\"trabajador.fichado === false || trabajador.fichado == undefined\"><a href=\"#\" style=\"width: 150px\" class=\"btn btn-outline-primary btn_fc\" @click=\"fichar(trabajador, index)\">FICHAR</a></td>\r\n                                         <td v-else><a href=\"#\" style=\"width: 150px\" class=\"btn btn-success\">Fichada/o</a></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-danger btn-lg\" data-bs-dismiss=\"modal\" @click=\"goTo('/')\">Confirmar</button>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- MODAL PASSWORD -->\r\n    <div class=\"modal fade\" id=\"modalPassword\" tabindex=\"-1\">\r\n        <div class=\"modal-dialog\" style=\"max-width: 700px\">\r\n            <div class=\"modal-content\">\r\n            <form @submit.prevent=\"goToMenuResponsable()\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">Ingresa la contraseña</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col\">\r\n                                <div class=\"mb-3\">\r\n                                    <label class=\"form-label\">Contraseña</label>\r\n                                    <input type=\"password\" minlength=\"3\" maxlength=\"20\" class=\"form-control\" v-model=\"password\">\r\n                                </div>\r\n                            \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n                    <button type=\"submit\" class=\"btn btn-success\" data-bs-dismiss=\"modal\">Confirmar</button>\r\n                </div>\r\n            </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport { Modal } from 'bootstrap';\r\nimport { onMounted, ref, watch } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport router from '../router/index';\r\nimport { useToast } from 'vue-toastification';\r\nconst sha1 = require('sha-1');\r\n\r\nexport default {\r\n    name: 'Dependientas',\r\n    setup() {\r\n        const store = useStore();\r\n        const idPlanificacion = ref('SIN_TURNO');\r\n        const nombre = 'Santy';\r\n        const id = 156;\r\n        let modalFichajes = null;\r\n        let modalPassword = null;\r\n        const arrayTrabajadores = ref([]);\r\n        const inputBusqueda = ref('');\r\n        const toast = useToast();\r\n        const arrayPlanes = ref([]);\r\n        const password = ref('');\r\n\r\n        function test() {\r\n            console.log(\"El selected es: \", idPlanificacion.value);\r\n        }\r\n\r\n        async function goToMenuResponsable() {\r\n            const hash = await sha1(password.value);\r\n            if (hash == '4cd914fef37199909adb4c0ba5e31439429995c4') {\r\n                router.push('/menuResponsable');\r\n            } else {\r\n                toast.error(\"Contraseña incorrecta\");\r\n            }\r\n        }\r\n\r\n        function abrirModal() {\r\n            modalFichajes.show();\r\n\r\n            //La peticion que solo tiene que hacer silema \r\n            // actualizarTurnos().then(() => {\r\n            //     modalFichajes.show();\r\n            // }).catch((err) => {\r\n            //     console.log(err);\r\n            //     modalFichajes.show();\r\n            // });            \r\n        }\r\n        function abrirModalPassword() {\r\n            modalPassword.show();\r\n        }\r\n\r\n        function cerrarModal() {\r\n            modalFichajes.hide();\r\n        }\r\n\r\n        function buscar() {\r\n            axios.post('trabajadores/buscar', { busqueda: inputBusqueda.value }).then((res) => {\r\n                arrayTrabajadores.value = res.data;\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function actualizarTurnos() {\r\n            return axios.get('turnos/getPlanes').then((resPlanes) => {\r\n                if (resPlanes.data.error == false) {\r\n                    arrayPlanes.value = resPlanes.data.info;\r\n                } else {\r\n                    toast.error(resPlanes.data.mensaje);\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                toast.error('Error frontend catch: axios turnos/getPlanes');\r\n            });\r\n        }\r\n\r\n        function ficharReal(trabajador, index) {\r\n            axios.post('trabajadores/fichar', { idTrabajador: trabajador.idTrabajador, idPlan: idPlanificacion.value }).then((res) => {\r\n                if (!res.data.error) {\r\n                    store.dispatch('Cesta/setIdAction', trabajador.idTrabajador);\r\n                    arrayTrabajadores.value[index].fichado = true;\r\n                   // actualizarTurnos();\r\n                    idPlanificacion.value = 'SIN_TURNO';\r\n                } else {\r\n                    console.log(res.data.mensaje);\r\n                    arrayTrabajadores.value[index].fichado = false;\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function fichar(trabajador, index) {\r\n            ficharReal(trabajador, index);\r\n            // if (idPlanificacion.value == 'SIN_TURNO') {\r\n            //     if (confirm(\"No has seleccionado turno. ¿CONTINUAR?\")) {\r\n            //         ficharReal(trabajador, index);\r\n            //     }\r\n            // } else {\r\n            //     ficharReal(trabajador, index);\r\n            // }\r\n        }\r\n\r\n        function actualizarLista() {\r\n            axios.post('trabajadores/actualizarTrabajadores').then((res) => {\r\n                if (res.data.error == false) {\r\n                    toast.success('Trabajadores actualizados');\r\n                } else {\r\n                    toast.error(res.data.mensaje);\r\n                }\r\n            });\r\n        }\r\n\r\n        function desfichar() {\r\n            axios.post('trabajadores/desfichar', { idTrabajador: store.state.Trabajadores.trabajadorActivo }).then((res) => {\r\n                if (!res.data.error) {\r\n                  //  arrayTrabajadores.value[index].fichado = false;\r\n                    store.dispatch('CestasActivas/deleteCestaActivaAction',store.state.Trabajadores.trabajadorActivo);\r\n                    axios.post('cestas/getCestaDiferente', { id_cesta: store.state.Trabajadores.trabajadorActivo }).then((data) => {\r\n                        store.dispatch('Cesta/setIdAction', data.data._id);\r\n                        // store.dispatch('Trabajadores/setTrabajadorActivo', parseInt(data.data._id));\r\n                        axios.post('trabajadores/setActivo', { id: data.data._id }).then((data2) =>{\r\n                            if (data2.data.error) {\r\n                               toast.error(data2.data.mensaje);\r\n                            } \r\n                            \r\n                        \r\n                        });\r\n                        router.push('/')\r\n                    }).catch((err)=>{\r\n                        console.log(err);\r\n                    })\r\n\r\n                } else {\r\n                    console.log('Error al desfichar');\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n          \r\n            \r\n        }\r\n\r\n        function consumoPersonal() {\r\n            store.dispatch('setModoActual', 'CONSUMO PERSONAL');\r\n            store.dispatch('Footer/setMenuActivo', 1);\r\n            router.push('/');\r\n        }\r\n\r\n        function goTo(x) {\r\n            router.push(x);\r\n        }\r\n        function apagarEquipo(){\r\n            \r\n              axios.get('apagarEquipo').then((res) => {\r\n                 console.log(res.data)\r\n                if (res.data.error == false) {\r\n          \r\n                  console.log(res.data.mensaje)\r\n                } else {\r\n                   \r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                toast.error('Error frontend catch: axios apagar/apagar');\r\n            });\r\n        }\r\n\r\n        onMounted(() => {\r\n            modalFichajes = new Modal(document.getElementById('modalFichajes'), {\r\n                keyboard: false,\r\n            });\r\n            modalPassword = new Modal(document.getElementById('modalPassword'), {\r\n                keyboard: false,\r\n            });\r\n            axios.get('turnos/getPlanes').then((res) => {\r\n                if (res.data.error == false) {\r\n                    arrayPlanes.value = res.data.info;\r\n                } else {\r\n                    toast.error(res.data.mensaje);\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                toast.error('Error frontend catch: axios turnos/getPlanes');\r\n            });\r\n        });\r\n\r\n        return {\r\n            goTo,\r\n            goToMenuResponsable,\r\n            abrirModalPassword,\r\n            password,\r\n            test,\r\n            arrayPlanes,\r\n            idPlanificacion,\r\n            actualizarLista,\r\n            consumoPersonal,\r\n            fichar,\r\n            desfichar,\r\n            inputBusqueda,\r\n            arrayTrabajadores,\r\n            buscar,\r\n            cerrarModal,\r\n            abrirModal,\r\n            apagarEquipo,\r\n            nombre,\r\n            id,\r\n        };\r\n    },\r\n    watch: {\r\n        inputBusqueda: function () {\r\n            if (this.inputBusqueda.length >= 3) {\r\n                this.buscar();\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n    .cardWidth {\r\n       width: 10rem;\r\n       margin: 5px;\r\n    }\r\n    span i {\r\n        font-size: 5rem;\r\n    }\r\n    .tituloFichajes {\r\n        font-size: 1.5rem;\r\n        text-transform: uppercase;\r\n        font-weight: bold;\r\n    }\r\n</style>\r\n","import { render } from \"./Fichajes.vue?vue&type=template&id=02524b8d&scoped=true\"\nimport script from \"./Fichajes.vue?vue&type=script&lang=js\"\nexport * from \"./Fichajes.vue?vue&type=script&lang=js\"\n\nimport \"./Fichajes.vue?vue&type=style&index=0&id=02524b8d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eze\\\\Documents\\\\GitHub\\\\tocFrontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-02524b8d\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Fichajes.vue?vue&type=style&index=0&id=02524b8d&scoped=true&lang=css\""],"sourceRoot":""}