{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/components/MesasComponent.vue?09c6","webpack:///./node_modules/core-js/internals/array-reduce.js","webpack:///./src/views/Mesas.vue","webpack:///./src/components/MesasComponent.vue","webpack:///./src/components/MesasComponent.vue?50ac","webpack:///./src/views/Mesas.vue?6b96"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","STRICT_METHOD","CHROME_BUG","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","fails","module","exports","METHOD_NAME","argument","method","call","global","aCallable","toObject","IndexedObject","lengthOfArrayLike","TypeError","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","right","class","key","j","findMesa","enUso","seleccionarCesta","nombre","parseInt","total","toFixed","volver","name","setup","activo","store","arrayCestas","toast","nuevaCestaString","nRows","value","modal","setActivo","x","addText","texto","borrarLetra","slice","router","push","crearCesta","a","post","nombreCesta","then","res","data","error","success","cerrarModal","cargarCestas","mensaje","err","console","log","dispatch","idMongo","col","row","nMesa","find","idCestaSincro","tiposIva","importe1","importe2","importe3","_id","activada","lista","o","subtotal","existePosicion","getTotalPosicion","get","info","borrarCesta","confirm","id","okey","abrirModal","show","hide","modalElement","document","getElementById","keyboard","__exports__","components","MesasComponent","render"],"mappings":"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","file":"js/chunk-bb2aaca0.e18ce53f.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MesasComponent.vue?vue&type=style&index=0&id=6b589a1c&scoped=true&lang=css\"","var global = require('../internals/global');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar TypeError = global.TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","<template>\n    <MesasComponent />\n</template>\n<script>\nimport MesasComponent from '../components/MesasComponent.vue';\n\nexport default {\n  name: 'Mesas',\n  setup() {\n    return {};\n  },\n  components: {\n    MesasComponent,\n  },\n};\n</script>\n","<template>\n    <div class=\"container-mesas\">\n        <div v-for=\"i in 10\" :key='i' class='row mt-1'>\n            <div v-for='j in 10' :key='j' class='col'>\n                <!-- v-bind:class=\"[{'cardMesa': findMesa(j, i).activada, 'cardMesaDisabled': !findMesa(j, i).activada}]\" -->\n                <div class='mesaGeneral cardMesa' @click='seleccionarCesta(findMesa(j, i))' v-bind:class=\"[{'enUso': findMesa(j, i).enUso}]\">\n                    <p>{{findMesa(j, i).nombre}}</p>\n                    <p>{{parseInt(findMesa(j, i).total).toFixed(2)}}</p>\n                </div>\n            </div>\n        </div> \n    </div>\n    <div class=\"position-fixed bottom-0 end-0 mb-1 me-2\">\n        <button @click=\"volver()\" class=\"btn btn-warning sizeBotones me-2\"> Volver </button>\n    </div>\n</template>\n<script>\n    import { computed, onMounted, ref } from 'vue';\n    import router from '../router/index';\n    import axios from 'axios';\n    import { useToast } from 'vue-toastification';\n    import { useStore } from 'vuex';\n    import { Modal } from 'bootstrap';\n\n    export default {\n        name: 'MesasComponent',\n        setup() {\n            const activo = ref(0);\n            const store = useStore();\n            const arrayCestas = ref([]);\n            const toast = useToast();\n            const nuevaCestaString = ref('');\n            const nRows = computed(() => {\n                if (arrayCestas.value.length % 4 > 0) {\n                    return parseInt(arrayCestas.value.length/4) + 1;\n                } else {\n                    return parseInt(arrayCestas.value.length/4);\n                }\n            });\n            var modal = null;\n\n\n            function setActivo(x) {\n                activo.value = x;\n            }\n\n            function addText(texto) {\n                nuevaCestaString.value += texto;\n            }\n\n            function borrarLetra() {\n                nuevaCestaString.value = nuevaCestaString.value.slice(0, -1);\n            }\n\n            function volver() {\n                router.push('/');\n            }\n\n            function checkEnUso(col, row) {\n\n            }\n\n            function crearCesta() {\n                if (nuevaCestaString.value.length > 2) {\n                    axios.post('cestas/crearCesta', { nombreCesta: nuevaCestaString.value }).then((res) => {\n                        if (res.data.error == false) {\n                            nuevaCestaString.value = '';\n                            toast.success('Cesta creada');\n                            cerrarModal();\n                            cargarCestas();\n                        } else {\n                            toast.error(res.data.mensaje);\n                        }\n                    }).catch((err) => {\n                        console.log(err);\n                        toast.error('Error, no se ha podido crear la nueva cesta');\n                    });\n                } else {\n                    toast.error('3 letras mínimo');\n                }\n            }\n\n            function seleccionarCesta(data) {\n                store.dispatch('Cesta/setIdAction', data.idMongo);\n                store.dispatch('CestasActivas/deleteCestaActivaAction', data.idMongo);\n                store.dispatch('CestasActivas/setCestasActivasAction', {idMongo: data.idMongo, nombre: data.nombre});\n                volver();\n            }\n\n            function findMesa(col, row) {\n                let nMesa = col;\n                if(row !== 1) nMesa = (row * 10) - (10 - col);\n                const data = arrayCestas.value.find(i => i.idCestaSincro === `Taula ${nMesa}`);\n                // COMPROBAR SI FUNCIONA SIN EL ? true : false;\n                const enUso = data && data.tiposIva.importe1 + data.tiposIva.importe2 + data.tiposIva.importe3 > 0 ? true : false;\n                return data !== undefined ? { idMongo: data._id, activada: true, nombre: data.idCestaSincro, total: data.lista.reduce((total, o) =>  o.subtotal + total,0), enUso: enUso } : { activada: false, nombre: '', total: '', enUso: enUso};\n            }\n\n            function existePosicion(index) {\n                if (arrayCestas.value[index] != undefined) {\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n\n            function getTotalPosicion(index) {\n                let subtotal = 0;\n                for (let i = 0; i < arrayCestas.value[index].lista.length; i++) {\n                    subtotal += arrayCestas.value[index].lista[i].subtotal;\n                }\n                return subtotal.toFixed(2);\n            }\n\n            function cargarCestas() {\n                axios.get('cestas/getCestas').then((res) => {\n                    if (!res.data.error) {\n                        arrayCestas.value = res.data.info;\n                    } else {\n                        toast.error(res.data.mensaje);\n                    }\n                }).catch((err) => {\n                    console.log(err);\n                    toast.error('Error en get > cestas/getCestas');\n                });\n            }\n\n            function borrarCesta(index) {\n                if(arrayCestas.value.length > 1) {\n                    if(confirm('Confirma para borrar la cesta')) {\n                        axios.post('cestas/borrarCesta', { id: arrayCestas.value[index]._id }).then((res) => {\n                            if (res.data.okey == true) {\n                                toast.success('Cesta borrada');\n                                cargarCestas();\n                            } else {\n                                toast.error(res.data.error);\n                            }\n                        }).catch((err) => {\n                            console.log(err);\n                            toast.error('Error, no se ha podido borrar la cesta');\n                        });\n                    }\n                } else {\n                    toast.info('¡Debe haber una cesta al menos!');\n                }\n            }\n\n            function abrirModal() {\n                modal.show();\n            }\n            \n            function cerrarModal() {\n                cargarCestas();\n                modal.hide();\n            }\n\n            onMounted(() => {\n                const modalElement = document.getElementById('modalNuevaCesta');\n                if (modalElement != null) {\n                    modal = new Modal(modalElement, { keyboard: false });\n                }\n                cargarCestas();\n            });\n\n            return {\n                crearCesta,\n                borrarLetra,\n                nuevaCestaString,\n                addText,\n                borrarCesta,\n                abrirModal,\n                cerrarModal,\n                seleccionarCesta,\n                getTotalPosicion,\n                existePosicion,\n                nRows,\n                arrayCestas,\n                volver,\n                setActivo,\n                findMesa,\n            };\n        },\n    };\n</script>\n<style scoped>\n    .fixed-row-bottom {\n        position: fixed;\n        bottom: 0;\n    }\n\n    .cestaActiva {\n        background: #EFD8A6;\n    }\n\n    .sizeBotones {\n        font-size: 2em;\n    }\n\n    .mnemoSize {\n        font-size: 1.5em;\n        width: 210px;\n        font-weight: bold;\n    }\n    .titleStyle {\n        font-size: 25px;\n        font-weight: bold;\n    }\n    .cardMesa {\n        border: 1px solid black;\n        border-radius: 5px;\n        text-align: center;\n        width: 7.5vw;\n        height: 5vw;\n        max-height: 5vw;\n        font-size: .8em;\n        background-color: rgba(252, 0, 0, 0.507);\n    }\n    .cardMesaDisabled {\n        border: 1px solid gray;\n        border-radius: 5px;\n        text-align: center;\n        width: 7.5vw;\n        height: 5vw;\n        max-height: 5vw;\n        color: gray;\n    }\n    .padding0 {\n        padding-right: 0;\n        padding-left: 0;\n    }\n    .mesaGeneral {\n        cursor: pointer;\n    }\n    .enUso {\n        background-color: rgba(12, 255, 4, 0.507);\n    }\n</style>\n","import { render } from \"./MesasComponent.vue?vue&type=template&id=6b589a1c&scoped=true\"\nimport script from \"./MesasComponent.vue?vue&type=script&lang=js\"\nexport * from \"./MesasComponent.vue?vue&type=script&lang=js\"\n\nimport \"./MesasComponent.vue?vue&type=style&index=0&id=6b589a1c&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/santy/Proyectos/Autonomo/Clientes/HitSystems/Mesas/tocFrontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b589a1c\"]])\n\nexport default __exports__","import { render } from \"./Mesas.vue?vue&type=template&id=704b656d\"\nimport script from \"./Mesas.vue?vue&type=script&lang=js\"\nexport * from \"./Mesas.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/santy/Proyectos/Autonomo/Clientes/HitSystems/Mesas/tocFrontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}